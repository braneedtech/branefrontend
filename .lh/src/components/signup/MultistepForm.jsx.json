{
    "sourceFile": "src/components/signup/MultistepForm.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1700577230493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1700577230493,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\nimport StepOne from \"./StepOne\";\r\nimport StepTwo from \"./StepTwo\";\r\nimport StepThree from \"./StepThree\";\r\nimport StepFour from './StepFour'\r\nimport \"./signup.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Carousel from \"./3dcarousel\";\r\nimport branelogo from \"../../assets/braneignitelogo.svg\";\r\nimport swirlblue from \"../../assets/swril-white.svg\";\r\n\r\n\r\n\r\nconst MultistepForm = () => {\r\n  // const [signupData, setSignupData] = useState([]);\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const totalSteps = 4;\r\n\r\n  \r\n  const [initialValues, setInitialValues] = useState({\r\n    parentsmobileno: \"\",\r\n    parentsmobileotp: \"\",\r\n    parentspassword: \"\",\r\n    parentsconfirmpassword: \"\",\r\n    parentsname: \"\",\r\n    parentssurname: \"\",\r\n    parentsalternateno: \"\",\r\n    parentsalternateotp: \"\",\r\n    parentsemail: \"\",\r\n    country: \"\",\r\n    pincode: \"\",\r\n    state: \"\",\r\n    city: \"\",\r\n    district: \"\",\r\n    address: \"\",\r\n    mothertongue: \"\",\r\n    child: [\r\n      {\r\n        childname: \"\",\r\n        childsurname: \"\",\r\n        childdob: \"\",\r\n        childgender: \"\",\r\n        childnationality: \"\",\r\n        childclass: \"\",\r\n        childsyllabus: \"\",\r\n        childschool: \"\",\r\n        mediumofinstruction: \"\",\r\n        firstlanguage: \"\",\r\n        secondlanguage: \"\",\r\n        thirdlanguage: \"\",\r\n        childpassword: \"\",\r\n        childconfirmpassword: \"\",\r\n        childimageurl: \"\",\r\n        childaudiourl: \"\",\r\n      },\r\n    ],\r\n  });\r\n\r\n  const setFieldValueCustom = (fieldName, fieldValue) => {\r\n    setInitialValues((prevData) => ({\r\n      ...prevData,\r\n      [fieldName]: fieldValue,\r\n    }));\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    const digitPattern = /^[0-9]*$/;\r\n    const key = String.fromCharCode(e.which);\r\n\r\n    if (!digitPattern.test(key)) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    setCurrentStep((prevStep) => prevStep + 1);\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    setCurrentStep((prevStep) => prevStep - 1);\r\n  };\r\n\r\n  const progressPercentage = ((currentStep - 1) / (totalSteps - 1)) * 100;\r\n\r\n  const handleSubmit = async (e,childData) => {\r\n    e.preventDefault()\r\n    try {\r\n      const combinedData = {\r\n        ...initialValues,\r\n        child: childData,\r\n      };\r\n\r\n      for (const field in combinedData) {\r\n        setFieldValueCustom(field, combinedData[field]);\r\n      }\r\n      setInitialValues({\r\n        parentsmobileno: \"\",\r\n        parentsmobileotp: \"\",\r\n        parentspassword: \"\",\r\n        parentsconfirmpassword: \"\",\r\n        parentsname: \"\",\r\n        parentssurname: \"\",\r\n        parentsalternateno: \"\",\r\n        parentsalternateotp: \"\",\r\n        parentsemail: \"\",\r\n        country: \"\",\r\n        pincode: \"\",\r\n        state: \"\",\r\n        city: \"\",\r\n        district: \"\",\r\n        address: \"\",\r\n        mothertongue: \"\",\r\n        child: [\r\n          {\r\n            childname: \"\",\r\n            childsurname: \"\",\r\n            childdob: \"\",\r\n            childgender: \"\",\r\n            childnationality: \"\",\r\n            childclass: \"\",\r\n            childsyllabus: \"\",\r\n            childschool: \"\",\r\n            mediumofinstruction: \"\",\r\n            firstlanguage: \"\",\r\n            secondlanguage: \"\",\r\n            thirdlanguage: \"\",\r\n            childpassword: \"\",\r\n            childconfirmpassword: \"\",\r\n            childimageurl: \"\",\r\n            childaudiourl: \"\",\r\n          },\r\n        ],\r\n      });\r\n      const response_signup = await axios.post(\"http://localhost:8080/signup_details\", {data: combinedData});\r\n      navigate(\"/login\");\r\n\r\n    } catch (error) {\r\n      console.error(\"Error submitting form:\", error);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <section className=\"signup\">\r\n            <section className=\"signup__branelogo\">\r\n        <Link to=\"/\">\r\n          <img src={branelogo} alt=\"logo\" />\r\n        </Link>\r\n      </section>\r\n      <div className=\"signup__background\">\r\n        <img src={swirlblue} className=\"swirlbackground\"></img>\r\n      </div>\r\n      <section className=\"signup__container\">\r\n        <article className=\"signup__container__form\">\r\n          {/* <article className=\"signup__container__form__logo\">\r\n            <Link to=\"/\"><img src={branelogo} alt=\"logo\" /></Link>\r\n          </article> */}\r\n          <article className=\"signup__container__form__div\">\r\n            <article className=\"signup__container__form__div__steps\">\r\n              {/* <p>\r\n                Step {currentStep} of {totalSteps}\r\n              </p> */}\r\n              <article className=\"signup__container__form__animation\">\r\n                <div className=\"progress-container\">\r\n                  <ul>\r\n                    {Array.from({ length: totalSteps }).map((_, index) => (\r\n                      <li key={index} style={{ left: `${((index-0.2) / (totalSteps - 1)) * 99}%`, background: index < currentStep - 1 ? \"#2ce36a\" : \"#35008b\", }}>{index + 1}</li>\r\n                    ))}\r\n                  </ul>\r\n\r\n                  <div className=\"progress-bar\" style={{ width: `${progressPercentage}%` }}></div>\r\n                </div>\r\n              </article>\r\n            </article>\r\n\r\n            <form className=\"signup__container__form__div__form\"\r\n              // onSubmit={handleSubmit}\r\n            >\r\n              {currentStep === 1 && (\r\n                <StepOne\r\n                  handleNext={handleNext}\r\n                  setFieldValue={setFieldValueCustom}\r\n                  values={initialValues}\r\n                  handleKeyPress={handleKeyPress}\r\n                />\r\n              )}\r\n\r\n              {currentStep === 2 && (\r\n                <StepTwo\r\n                  handlePrevious={handlePrevious}\r\n                  handleNext={handleNext}\r\n                  setFieldValue={setFieldValueCustom}\r\n                  values={initialValues}\r\n                  handleKeyPress={handleKeyPress}\r\n                />\r\n              )}\r\n              {currentStep === 3 && (\r\n                <StepThree\r\n                  setFieldValue={setFieldValueCustom}\r\n                  values={initialValues}\r\n                  handleNext={handleNext}\r\n                  handlePrevious={handlePrevious}\r\n                />\r\n              )}\r\n\r\n              {currentStep === 4 && (\r\n                <StepFour\r\n                  handlePrevious={handlePrevious}\r\n                  handleSubmit={handleSubmit}\r\n                  parentsPassword={initialValues.parentspassword}\r\n                  initialValues={initialValues}\r\n                  setInitialValues={setInitialValues}\r\n                  handleKeyPress={handleKeyPress}\r\n                // StepFourData = {signupData[1]?.StepFourData}\r\n                />\r\n              )}\r\n            </form>\r\n            <div className=\"haveanaccount\">Already Have An Account? <Link to='/login'>Sign In</Link></div>\r\n          </article>\r\n        </article>\r\n        {/* <article className=\"signup__container__animation\">\r\n          <Carousel></Carousel>               \r\n        </article> */}\r\n      </section>\r\n      <p className=\"FooterCopyright\">Â© 2023 Brane Cognitives Pte. Ltd. All Rights Reserved.</p>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MultistepForm;\r\n"
        }
    ]
}